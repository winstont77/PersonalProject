import{r as c,o as k,b as S,c as T,d as e,t as r,u as m,w,v as B,p as $,h as D,g as P,f as x,a as C,F as M,i as N,e as E}from"./index-380c6584.js";import{a as f}from"./axios-82afda87.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const h=n=>($("data-v-091b9604"),n=n(),D(),n),F={class:"betResult"},H={class:"betResult-content"},L={class:"betResult-content-table"},G=h(()=>e("tr",null,[e("th",null,"投注金額"),e("th",null,"賠率"),e("th",{style:{width:"60%"}},"投注隊伍")],-1)),O={style:{display:"flex"}},z={style:{display:"flex","margin-top":"30px"}},A={style:{display:"flex","flex-direction":"column",margin:"auto"}},V=h(()=>e("div",{style:{margin:"auto",color:"#DDDDDD"}},"信用卡資料",-1)),Y=h(()=>e("div",{class:"tpfield",id:"card-number"},null,-1)),U=h(()=>e("div",{class:"tpfield",id:"card-expiration-date"},null,-1)),W=h(()=>e("div",{class:"tpfield",id:"card-ccv"},null,-1)),Z=h(()=>e("div",{style:{margin:"auto",border:"1px solid gray",padding:"5px 10px"}},"確認",-1)),j=[Z],q={class:"betResult-content-surebutton"},J={class:"betResult-content-surebutton-content"},K={class:"betResult-popup"},Q=P('<div class="betResult-popup-window" data-v-091b9604><div class="betResult-popup-window-header" data-v-091b9604></div><div class="betResult-popup-window-body" data-v-091b9604><div style="color:#fff;text-align:center;margin-top:100px;margin-bottom:100px;cursor:default;" data-v-091b9604>下注成功!</div><div class="betResult-popup-window-body-button" data-v-091b9604><div class="betResult-popup-window-body-button-body" data-v-091b9604>確認</div></div></div></div>',1),X=[Q],ee={__name:"BetResult",props:{odds:null,team:null,event:{}},emits:["betResultEmit"],setup(n,{emit:p}){const i=n;let l=(a,s)=>{if(s===!0){let o;if(TPDirect.card.getTappayFieldsStatus().canGetPrime===!1){alert("can not get prime");return}TPDirect.card.getPrime(v=>{if(v.status!==0){alert("get prime error "+v.msg);return}alert("get prime 成功，prime: "+v.card.prime),o=v.card.prime,f.post("https://localhost:7099/PostBets",{Bet:{EventId:i.event.id,DateTime:_().toString(),Money:u.value,AwayTeamName:i.event.awayTeamName,AwayTeamOdds:i.event.awayTeamOdds,HomeTeamName:i.event.homeTeamName,HomeTeamOdds:i.event.homeTeamOdds,Sports:i.event.sports,BetTeamOdds:i.odds,BetTeamName:i.team,Prime:""},UserName:localStorage.getItem("userName"),EventId:i.event.id,Prime:o},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(b=>{console.log(b),f.post("https://localhost:7099/PostMemberDetail",{Name:localStorage.getItem("userName")},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(y=>{console.log(y),localStorage.removeItem("userMoney"),localStorage.removeItem("userProfit"),localStorage.setItem("userMoney",y.data.money),localStorage.setItem("userProfit",y.data.profit),console.log(localStorage),x.push({path:"/index/myBet"}),location.reload()}).catch(y=>{console.log(y),x.push({path:"/index/myBet"}),location.reload()})}).catch(b=>{console.log(b),localStorage.removeItem("token"),x.push({path:"/signin"})})})}else console.log("cancel bet");p("betResultEmit",a)},_=()=>{const a=new Date,s=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),I=String(a.getDate()).padStart(2,"0"),v=String(a.getHours()).padStart(2,"0"),b=String(a.getSeconds()).padStart(2,"0");return`${s}-${o}-${I}T${v}:${b}:00Z`},g=a=>{u.value=a.target.value},u=c(100);c(0);let t=a=>{if(TPDirect.card.getTappayFieldsStatus().canGetPrime===!1){alert("can not get prime");return}TPDirect.card.getPrime(o=>{if(o.status!==0){alert("get prime error "+o.msg);return}alert("get prime 成功，prime: "+o.card.prime),console.log(o)})},d={number:{element:"#card-number",placeholder:"**** **** **** ****"},expirationDate:{element:"#card-expiration-date",placeholder:"MM / YY"},ccv:{element:"#card-ccv",placeholder:"ccv"}};return k(()=>{console.log("Component has been mounted"),TPDirect.card.setup({fields:d,styles:{input:{color:"gray"},"input.ccv":{},"input.card-expiration-date":{},"input.card-number":{},":focus":{},".valid":{color:"green"},".invalid":{color:"red"},"@media screen and (max-width: 400px)":{input:{color:"orange"}}},isMaskCreditCardNumber:!0,maskCreditCardNumberRange:{beginIndex:6,endIndex:11}}),TPDirect.card.onUpdate(function(a){a.canGetPrime,a.cardType,a.status.number===2||a.status.number,a.status.expiry===2||a.status.expiry,a.status.ccv===2||a.status.ccv}),c(!0)}),(a,s)=>(S(),T("div",F,[e("div",H,[e("div",L,[e("table",null,[G,e("tr",null,[e("td",null,r(m(u)),1),e("td",null,r(n.odds),1),e("td",null,r(n.team),1)])])]),e("div",O,[e("input",{type:"range",class:"betmoneyinputrange",min:"100",max:"5000",step:"100",value:"50",onInput:s[0]||(s[0]=(...o)=>m(g)&&m(g)(...o))},null,32)]),e("div",z,[e("div",A,[V,Y,U,W,w(e("div",{onClick:s[1]||(s[1]=(...o)=>m(t)&&m(t)(...o)),style:{display:"flex"}},j,512),[[B,!1]])])]),e("div",q,[e("div",J,[e("div",{class:"betResult-content-surebutton-text",onClick:s[2]||(s[2]=o=>m(l)(!1,!0))},"確認"),e("div",{class:"betResult-content-surebutton-textcancel",onClick:s[3]||(s[3]=o=>m(l)(!1,!1))},"取消")])])]),w(e("div",K,X,512),[[B,a.betResultPopup]])]))}},te=R(ee,[["__scopeId","data-v-091b9604"]]);const ae={setup(){let n=c([]),p=c(!1),i=c(null),l=c(""),_=c({}),g=(t,d,a)=>{f.get("https://localhost:7099/GetSelectTeam",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{console.log(s)}).catch(s=>{console.log(s),x.push({path:"/signin"})}),console.log(t,d,a),i.value=a,l.value=d,p.value=!0,_.value=n.value[t]},u=t=>{p.value=t};return k(()=>{console.log(localStorage.getItem("token")),f.get("https://localhost:7099/GetEvents").then(t=>{console.log(t),t.data.forEach(d=>{d.sports==="basketball"&&n.value.push(d)}),console.log(n.value)}).catch(t=>{console.log(t)}),f.post("https://localhost:7099/PostMemberDetail",{Name:localStorage.getItem("userName")},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{console.log(t),localStorage.removeItem("userMoney"),localStorage.removeItem("userProfit"),localStorage.setItem("userMoney",t.data.money),localStorage.setItem("userProfit",t.data.profit),console.log(localStorage)}).catch(t=>{console.log(t)})}),{schedule:n,displayBetResult:p,selectodds:i,selectteamname:l,selectevent:_,selectTeam:g,handleBetResultEmit:u}},components:{BetResult:te}},se={class:"wcl-PageContainer_Colcontainer"},oe={class:"wcl-PageContainer_Col1"},le={class:"wcl-CommonElementStyle_PrematchCenter"},ne={class:"sm-Header"},ie=P('<div class="sm-Header_Title"><div class="sm-Header_TitleText">籃球</div></div><div class="sm-Header_Nav"><div class="sph-LiveInPlayHeader"><div class="sph-LiveInPlayHeader_Scroller"><div class="sph-HorizontalLiveNavBarScroller_Wrapper"><div class="sph-HorizontalLiveNavBarScroller_Contents"><div class="sph-LiveInPlayButtonBarButton">投注</div><div></div><div></div></div></div></div><div></div></div></div>',2),re={class:"sm-SplashModule"},de={class:"gl-MarketGrid"},ce=e("div",{class:"ff-FeaturedFixtureLoader"},[e("div",null,[e("div",{class:"ff-Header"},[e("div",{class:"ff-Header_Title"},"精選賽事")])])],-1),ue={class:"gl-MarketGroup_Wrapper"},me={class:"gl-MarketGroupContainer"},pe={class:"sgl-MarketFixtureDetailsLabel-table"},ve=e("tr",{style:{"background-color":"#222"},class:"sgl-MarketFixtureDetailsLabel-table-header"},[e("th",null,"日期"),e("th",null,"時間"),e("th",null,"隊伍"),e("th",null,"賠率")],-1),he={class:"sgl-MarketFixtureDetailsLabel-table-content"},_e={style:{display:"flex"}},ge=["onClick"],be={style:{width:"5%"}},ye=e("span",{style:{width:"20%"}},"vs",-1),fe={style:{width:"5%"}},Se=["onClick"];function Te(n,p,i,l,_,g){const u=C("BetResult");return S(),T("div",se,[e("div",oe,[e("div",le,[e("div",ne,[ie,e("div",re,[e("div",de,[ce,e("div",ue,[e("div",me,[e("table",pe,[ve,(S(!0),T(M,null,N(l.schedule,(t,d)=>w((S(),T("tr",he,[e("td",null,[e("div",null,r(t.dateTime.split("T")[0]),1)]),e("td",null,r(t.dateTime.split("T")[1].split("Z")[0]),1),e("td",_e,[e("span",{onClick:a=>l.selectTeam(d,t.awayTeamName,t.awayTeamOdds),style:{width:"35%"},class:"gl-MarketFixtureDetailsLabel-table-content-away"},r(t.awayTeamName),9,ge),e("span",be,r(t.awayTeamPoint),1),ye,e("span",fe,r(t.homeTeamPoint),1),e("span",{onClick:a=>l.selectTeam(d,t.homeTeamName,t.homeTeamOdds),class:"gl-MarketFixtureDetailsLabel-table-content-home",style:{width:"35%"}},r(t.homeTeamName),9,Se)]),e("td",null,r(t.awayTeamOdds)+" : "+r(t.homeTeamOdds),1)],512)),[[B,!t.closeEvent]])),256))])])])]),w(E(u,{odds:l.selectodds,team:l.selectteamname,event:l.selectevent,onBetResultEmit:l.handleBetResultEmit},null,8,["odds","team","event","onBetResultEmit"]),[[B,l.displayBetResult]])])])])])])}const Ie=R(ae,[["render",Te]]);export{Ie as default};
